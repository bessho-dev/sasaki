<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>佐々木日記 | 佐々木動態観測事務所</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Yomogi&family=Zen+Kurenaido&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div id="liquid-overlay">
    <div class="liquid-layer layer-1"></div>
    <div class="liquid-layer layer-2"></div>
    <div class="loader-text">Loading System...</div>
</div>

<div id="drawer-menu">
    <div class="drawer-title">観測手帳</div>
    <div class="drawer-content-scroll">
        <div class="drawer-section">
            <h3>ショートカット</h3>
            <a href="javascript:void(0)" onclick="router.navigate('/')" class="drawer-link">ホーム</a>
            <a href="javascript:void(0)" onclick="router.navigate('/news')" class="drawer-link">運営通達一覧</a>
            <a href="javascript:void(0)" onclick="router.navigate('/info')" class="drawer-link">佐々木情報部屋</a>
            <a href="javascript:void(0)" onclick="router.navigate('/about')" class="drawer-link">事務所概要</a>
        </div>
        
        <div class="drawer-section">
            <h3>暇つぶし機能</h3>
            <div class="fun-panel">
                <button class="btn btn-sm" onclick="app.drawGacha()">佐々木ガチャ</button>
                <button class="btn btn-sm" onclick="app.startQuiz()">佐々木検定</button>
            </div>
            <div id="gacha-result" class="hidden"></div>
        </div>

        <div class="drawer-section">
            <h3>観測対象ステータス</h3>
            <div id="sasaki-status-mini">
                <small>現在の観測員数: <span id="observer-num">Calculating...</span></small>
            </div>
        </div>
    </div>
    <div class="key-hint">ESCキーで閉じる</div>
</div>

<div id="app">
    <header>
        <div class="brand" onclick="router.navigate('/')">
            <div class="sasaki-face"></div>
            <h1>佐々木日記</h1>
        </div>
        <nav id="nav-public">
            <button class="btn btn-outline" onclick="router.navigate('/info')">情報部屋</button>
            <button class="btn btn-outline" onclick="router.navigate('/about')">About</button>
        </nav>
    </header>

    <div id="view-home" class="view-section">
        <div id="news-preview"></div>

        <div class="controls-container">
            <div class="search-container">
                <input type="text" class="search-input" placeholder="キーワード検索..." 
                    onfocus="app.setSearchMode(true)" 
                    oninput="app.search(this.value)">
            </div>
            <div class="sort-buttons">
                <button class="sort-btn active" onclick="app.sortArticles('new')">最新順</button>
                <button class="sort-btn" onclick="app.sortArticles('fav')">管理者選</button>
                <button class="sort-btn" onclick="app.sortArticles('damage')">悲惨度</button>
            </div>
        </div>

        <div id="digest-container"></div>
        
        <footer class="site-footer">
            <div>&copy; 2026 佐々木動態観測事務所</div>
            <div class="sys-version">System v3.0.1 (Stable)</div>
        </footer>
    </div>

    <div id="view-article" class="view-section hidden">
        <div class="nav-back">
            <button class="btn btn-outline" onclick="router.back()">← 戻る</button>
            <span style="font-size:0.8rem; color:#888;">ESCキーで戻る</span>
        </div>
        <div class="article-container">
            <div id="article-render-target"></div>
        </div>
    </div>

    <div id="view-news" class="view-section hidden">
        <button class="btn btn-outline" onclick="router.back()" style="margin-bottom:20px;">← 戻る</button>
        <h2 class="page-title">運営からの通達アーカイブ</h2>
        <div id="news-full-list" class="news-archive"></div>
    </div>

    <div id="view-info" class="view-section hidden">
        <button class="btn btn-outline" onclick="router.back()" style="margin-bottom:20px;">← 戻る</button>
        
        <div class="info-room-header">
            <h2 class="page-title">佐々木情報部屋</h2>
            <p class="info-description">
                本区画は、観測者諸氏より提供された「佐々木に関する未確認情報」を保管するアーカイブです。<br>
                各情報には固有のSSIDが割り当てられ、厳格に管理されています。<br>
                <span style="color:var(--c-danger); font-size:0.8rem;">※真実を皆に届けるためのプラットフォームとして運用されます。</span>
            </p>
            <div class="info-actions">
                <button class="btn" onclick="window.open('https://forms.google.com/your-submission-form-url', '_blank')">＋ 情報を提供する</button>
            </div>
        </div>

        <div id="info-list" class="info-grid"></div>

        <div class="info-terms">
            <h4>【利用規約・免責事項】</h4>
            <ul>
                <li>過度にプライベートな情報（住所、連絡先等）の提供は固く禁止します。</li>
                <li>差別的、侮辱的な表現を含む情報の登録は行いません。</li>
                <li>情報の開示請求は、正当な理由がある場合のみ下記フォームより受け付けます。</li>
            </ul>
        </div>
    </div>

    <div id="view-about" class="view-section hidden">
        <button class="btn btn-outline" onclick="router.back()" style="margin-bottom:20px;">← 戻る</button>
        <div class="article-container">
            <div class="article-header">
                <h1 class="article-title">佐々木動態観測事務所について</h1>
            </div>
            <div class="md-content">
                <p><b>■ 設立趣旨</b><br>
                本機構は、指定被験体「佐々木」の挙動および文房具流動性を観測・記録することを目的とする非営利機関です。</p>
                <p><b>■ リンク記法について</b><br>
                日記内で <code>\(URL)\</code> と記述されている箇所は、外部へのポータルとして機能します。</p>
                <p><b>■ 佐々木情報操作規約</b><br>
                有益な情報提供者には「情報操作権」が付与される場合がありますが、乱用は厳禁です。</p>
            </div>
        </div>
    </div>

</div>

<script src="data.js"></script>
<script src="app.js"></script>
</body>
</html>

