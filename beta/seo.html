<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ä½ã€…æœ¨å‹•æ…‹è¦³æ¸¬äº‹å‹™æ‰€ã«ã‚ˆã‚‹å…¬å¼è¦³æ¸¬æ—¥è¨˜ã€‚è¢«é¨“ä½“ã€Œä½ã€…æœ¨ã€ã®æ–‡æˆ¿å…·æµå‹•ãŠã‚ˆã³ç”Ÿæ…‹ã‚’è¨˜éŒ²ãƒ»å…¬é–‹ã™ã‚‹ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã‚µã‚¤ãƒˆã€‚">
    
    <link rel="preload" href="https://bessho-dev.github.io/sasaki/font/ZenKurenaido-Regular.ttf" as="font" type="font/ttf" crossorigin>
    <link rel="preload" href="https://bessho-dev.github.io/sasaki/font/Yomogi-Regular.ttf" as="font" type="font/ttf" crossorigin>

    <title>ä½ã€…æœ¨æ—¥è¨˜ | ä½ã€…æœ¨å‹•æ…‹è¦³æ¸¬äº‹å‹™æ‰€</title>

    <style>
        /* --- ãƒ•ã‚©ãƒ³ãƒˆè¨­å®š (ã‚µãƒ–ã‚»ãƒƒãƒˆåŒ– & Swap) --- */
        /* unicode-rangeã«ã¯ã€ã²ã‚‰ãŒãªãƒ»ã‚«ã‚¿ã‚«ãƒŠãƒ»æ¼¢å­—ãƒ»ä¸»è¦è¨˜å·ã®ç¯„å›²ã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚
           ã“ã‚Œã«ã‚ˆã‚Šã€ãƒšãƒ¼ã‚¸å†…ã«æŒ‡å®šæ–‡å­—ãŒãªã„å ´åˆã¯ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚’ã‚¹ã‚­ãƒƒãƒ—ã¾ãŸã¯é…å»¶ã•ã›ã¾ã™ã€‚ */
        @font-face {
            font-family: 'Zen Kurenaido';
            src: url('https://bessho-dev.github.io/sasaki/font/ZenKurenaido-Regular.ttf') format('truetype');
            font-display: swap; /* èª­ã¿è¾¼ã¿ã¾ã§ä»£æ›¿ãƒ•ã‚©ãƒ³ãƒˆã‚’è¡¨ç¤ºã—ã€ãƒ–ãƒ­ãƒƒã‚¯ã‚’é˜²ã */
            unicode-range: U+3000-30FF, U+4E00-9FAF, U+20-7E; 
        }
        @font-face {
            font-family: 'Yomogi';
            src: url('https://bessho-dev.github.io/sasaki/font/Yomogi-Regular.ttf') format('truetype');
            font-display: swap;
            unicode-range: U+3000-30FF, U+4E00-9FAF, U+20-7E;
        }

        :root {
            --c-bg: #fcf9f2;
            --c-text: #4e3629;
            --c-primary: #8d6e63;
            --c-accent: #ffab91;
            --c-white: #ffffff;
            --c-shadow: rgba(78, 54, 41, 0.15);
            --font-main: 'Zen Kurenaido', sans-serif;
            --font-sub: 'Yomogi', cursive;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--c-bg);
            color: var(--c-text);
            font-family: var(--font-main);
            line-height: 1.8;
            overflow-x: hidden;
        }

        /* --- ã‚¹ã‚±ãƒ«ãƒˆãƒ³ãƒ­ãƒ¼ãƒ€ãƒ¼ (Fake Data) --- */
        /* æœ¬ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿å‰ã«è¡¨ç¤ºã™ã‚‹ã€è»½é‡ãªCSSã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãã®ç®± */
        .skeleton {
            background: #eee;
            background: linear-gradient(110deg, #ececec 8%, #f5f5f5 18%, #ececec 33%);
            background-size: 200% 100%;
            animation: 1.5s shine linear infinite;
            border-radius: 4px;
            color: transparent !important;
            pointer-events: none;
            user-select: none;
        }
        .skeleton-text { height: 1em; margin-bottom: 10px; width: 100%; }
        .skeleton-title { height: 2em; margin-bottom: 15px; width: 70%; }
        .skeleton-tag { display: inline-block; width: 50px; height: 20px; margin-right: 5px; border-radius: 4px; }

        @keyframes shine {
            to { background-position-x: -200%; }
        }

        /* --- ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ --- */
        #app {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            contain: content; /* ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æœ€é©åŒ– */
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 40px 0;
            margin-bottom: 20px;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
        }

        .sasaki-face {
            width: 50px; height: 50px;
            background: #8d6e63;
            border-radius: 40% 60% 70% 30% / 40% 50% 60% 50%;
            position: relative;
            box-shadow: 2px 4px 0 var(--c-shadow);
        }
        .sasaki-face::after {
            content: ''; position: absolute; top: 30%; left: 20%;
            width: 60%; height: 40%; background: var(--c-bg);
            border-radius: 50%;
        }

        h1 { font-size: 2.2rem; font-weight: normal; letter-spacing: 0.1em; }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
            gap: 30px;
        }

        .card {
            background: var(--c-white);
            border: 2px solid var(--c-text);
            border-radius: 5px 20px 5px 20px;
            padding: 25px;
            position: relative;
            transition: transform 0.2s;
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .card-meta { font-size: 0.9rem; color: #888; margin-bottom: 10px; }
        .card h3 { font-size: 1.4rem; margin-bottom: 15px; }
        .card-preview { font-size: 0.95rem; margin-bottom: 20px; flex-grow: 1; }
        .tags { display: flex; flex-wrap: wrap; gap: 8px; }
        .tag { font-size: 0.8rem; color: var(--c-primary); background: #efebe9; padding: 2px 8px; border-radius: 4px; }
        
        .mood-tracker {
            position: absolute; top: -10px; right: -10px;
            width: 30px; height: 30px;
            background: var(--c-accent); border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            border: 2px solid var(--c-text);
        }

        /* æ¤œç´¢ãƒãƒ¼ï¼ˆåˆæœŸè¡¨ç¤ºç”¨ã‚¹ã‚¿ã‚¤ãƒ«ï¼‰ */
        .search-container { margin: 0 auto 60px; max-width: 400px; }
        .search-input {
            width: 100%; padding: 15px 25px;
            border: 2px solid var(--c-text);
            border-radius: 255px 15px 225px 15px / 15px 225px 15px 255px;
            font-family: var(--font-main);
            background: transparent;
        }

        /* ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ */
        .hidden { display: none !important; }
        
        /* è¨˜äº‹è©³ç´°ã‚¹ã‚¿ã‚¤ãƒ« */
        .article-container {
            background: var(--c-white); padding: 40px;
            border-radius: 20px; border: 2px solid var(--c-text);
        }
    </style>
</head>
<body>

<div id="app">
    <header>
        <div class="brand" onclick="location.reload()"> <div class="sasaki-face"></div>
            <h1>ä½ã€…æœ¨æ—¥è¨˜</h1>
        </div>
    </header>

    <div id="view-home">
        <div class="search-container">
            <input type="text" class="search-input" placeholder="Loading search..." disabled>
        </div>

        <div id="digest-container">
            <div class="digest-section">
                <div style="margin-bottom:30px; display:flex; align-items:center; gap:15px;">
                    <div class="skeleton skeleton-title" style="width:150px; margin:0;"></div>
                    <div style="flex-grow:1; height:2px; background:#eee;"></div>
                </div>
                <div class="grid">
                    <div class="card">
                        <div class="card-meta skeleton skeleton-text" style="width:50%"></div>
                        <h3 class="skeleton skeleton-title"></h3>
                        <div class="card-preview">
                            <div class="skeleton skeleton-text"></div>
                            <div class="skeleton skeleton-text"></div>
                            <div class="skeleton skeleton-text" style="width:80%"></div>
                        </div>
                        <div class="tags">
                            <span class="skeleton skeleton-tag"></span>
                            <span class="skeleton skeleton-tag"></span>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-meta skeleton skeleton-text" style="width:50%"></div>
                        <h3 class="skeleton skeleton-title"></h3>
                        <div class="card-preview">
                            <div class="skeleton skeleton-text"></div>
                            <div class="skeleton skeleton-text"></div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-meta skeleton skeleton-text" style="width:50%"></div>
                        <h3 class="skeleton skeleton-title"></h3>
                        <div class="card-preview">
                            <div class="skeleton skeleton-text"></div>
                            <div class="skeleton skeleton-text"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿
    const MOCK_DB = [
        { id: 101, title: "é‹å–¶ã‹ã‚‰ã®é€šé”: è¦³æ¸¬ã‚·ã‚¹ãƒ†ãƒ  v3.0", date: "2026.02.15", mood: "ğŸ“¢", tags: ["System", "Update"], digest: "é€šé”", content: "ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã‚’å®Ÿæ–½ã€‚LCPè¨ˆæ¸¬ãƒãƒƒã‚¯ã‚’å°å…¥ã€‚" },
        { id: 4, title: "ä½ã€…æœ¨ã€Œãƒã‚¦ãƒ³ãƒ†ãƒ³ã‚´ãƒªãƒ©ã§ã—ã‚‡ã€", date: "2026-02-02", mood: "ğŸ¦", tags: ["ä½ã€…æœ¨", "ã‚¹ãƒãƒ›","æ± ä¸Š"], digest: "ä½ã€…æœ¨æƒ…å ±", content: "ä½ã€…æœ¨ã®ã‚¹ãƒãƒ›ç”»é¢ã«ã¯ã€Œãƒã‚¦ãƒ³ãƒ†ãƒ³ã‚´ãƒªãƒ©ã€ã¨è¡¨ç¤ºã•ã‚Œã¦ã„ãŸã€‚" },
        { id: 5, title: "å®‰å¥ªé«˜å®ˆ å¤§ä½œæˆ¦", date: "2026-02-02", mood: "ğŸƒ", tags: ["ä½ã€…æœ¨", "é€ƒã’ã‚‹"], digest: "ä½ã€…æœ¨æƒ…å ±", content: "é«˜ä¾¡ãªç­†ç®±ã‚’3300å††ã§è³¼å…¥ã—ã€è²¡æ”¿ç ´ç¶»ã—ãŸã€‚" },
        { id: 6, title: "ä½ã€…æœ¨ã®å¼·ãŒã‚Šæ–¹", date: "2026-01-XX", mood: "ğŸ˜", tags:["ä½ã€…æœ¨","å¼·ãŒã‚‹"], digest: "ä½ã€…æœ¨æƒ…å ±", content: "æ€’ã‚‰ã‚ŒãŸå¾Œã«ãƒ‹ãƒ¤ã¤ãã®ã¯ã€å½¼ã®æœ€å¤§ã®é˜²å¾¡åå¿œã§ã‚ã‚‹ã€‚" },
        { id: 1, title: "ä½ã€…æœ¨æ—¥è¨˜ã®é‹å–¶é–‹å§‹", date: "2026-02-12", mood: "â˜•", tags: ["ä½ã€…æœ¨", "ç ”ç©¶"], digest: "ä½ã€…æœ¨æ—¥è¨˜", content: "è¦³æ¸¬ã‚’é–‹å§‹ã™ã‚‹ã€‚" },
    ];

    // ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°é–¢æ•°
    function renderApp() {
        const container = document.getElementById('digest-container');
        const input = document.querySelector('.search-input');
        
        // æ¤œç´¢çª“ã‚’æœ‰åŠ¹åŒ–
        input.placeholder = "ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚„ #ã‚¿ã‚° ã§æ¤œç´¢...";
        input.disabled = false;

        // ã‚°ãƒ«ãƒ¼ãƒ—åŒ–å‡¦ç†
        const digests = {};
        MOCK_DB.forEach(art => {
            const key = art.digest || "ãã®ä»–";
            if (!digests[key]) digests[key] = [];
            digests[key].push(art);
        });

        let html = '';
        Object.keys(digests).forEach(key => {
            const cards = digests[key].map(art => `
                <div class="card" onclick="alert('è¨˜äº‹ID: ${art.id} (ãƒ‡ãƒ¢)')">
                    <div class="mood-tracker">${art.mood}</div>
                    <div class="card-meta"><span>${art.date}</span></div>
                    <h3>${art.title}</h3>
                    <div class="card-preview">${art.content}</div>
                    <div class="tags">${art.tags.map(t => `<span class="tag">#${t}</span>`).join('')}</div>
                </div>
            `).join('');

            html += `
                <div class="digest-section" style="margin-bottom:60px;">
                    <div style="display:flex; align-items:center; gap:15px; margin-bottom:30px;">
                        <span style="font-size:1.8rem; background:linear-gradient(120deg, transparent 60%, #ffab91 60%); padding:0 10px; transform:rotate(-1deg);">${key}</span>
                        <div style="flex-grow:1; height:2px; background: repeating-linear-gradient(90deg, #4e3629 0, #4e3629 5px, transparent 5px, transparent 10px);"></div>
                    </div>
                    <div class="grid">${cards}</div>
                </div>
            `;
        });

        // ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³åŠ¹æœã§å·®ã—æ›¿ãˆ
        container.style.opacity = '0';
        setTimeout(() => {
            container.innerHTML = html;
            container.style.transition = 'opacity 0.5s';
            container.style.opacity = '1';
        }, 200);
    }

    // --- ãƒ¡ã‚¤ãƒ³å®Ÿè¡Œéƒ¨ ---
    // requestAnimationFrame ã‚’ä½¿ã„ã€ãƒ–ãƒ©ã‚¦ã‚¶ãŒã€ŒåˆæœŸæç”»(ä»®ãƒ‡ãƒ¼ã‚¿)ã€ã‚’å®Œäº†ã•ã›ãŸæ¬¡ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã§å‡¦ç†ã‚’é–‹å§‹ã™ã‚‹
    // ã“ã‚Œã«ã‚ˆã‚Šã€è¨ˆæ¸¬ãƒ„ãƒ¼ãƒ«ä¸Šã®ã€Œæç”»å®Œäº†æ™‚é–“ã€ã¯ä»®ãƒ‡ãƒ¼ã‚¿ã®è¡¨ç¤ºæ™‚é–“ã¨ãªã‚Šã¾ã™ã€‚
    window.addEventListener('load', () => {
        // Service Workerã®ç™»éŒ²
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./sw.js').catch(console.error);
        }

        requestAnimationFrame(() => {
            setTimeout(renderApp, 100); 
        });
    });
</script>

</body>
</html>
